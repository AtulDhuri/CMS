{"ast":null,"code":"import { Validators, ReactiveFormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { EnquiryFormComponent } from \"../enquiry-form/enquiry-form.component\";\nimport { CustomerDetailsComponent } from \"../customer-details/customer-details.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../enquiry-form/enquiry-form.service\";\nimport * as i3 from \"@angular/common\";\nfunction CustomersComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"app-enquiry-form\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CustomersComponent_div_7_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.searchErrorMsg);\n  }\n}\nfunction CustomersComponent_div_7_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 9);\n  }\n}\nfunction CustomersComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵelement(1, \"app-customer-details\");\n    i0.ɵɵtemplate(2, CustomersComponent_div_7_div_2_Template, 2, 1, \"div\", 6)(3, CustomersComponent_div_7_div_3_Template, 1, 0, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.searchErrorMsg);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.foundCustomer);\n  }\n}\nexport let CustomersComponent = /*#__PURE__*/(() => {\n  class CustomersComponent {\n    constructor(fb, enquiryService) {\n      this.fb = fb;\n      this.enquiryService = enquiryService;\n      this.mode = 'add';\n      this.submitted = false;\n      this.isLoading = false;\n      this.addSuccessMsg = '';\n      this.addErrorMsg = '';\n      this.searchSubmitted = false;\n      this.searchLoading = false;\n      this.searchErrorMsg = '';\n      this.foundCustomer = null;\n      this.newRemark = this.fb.control('', [Validators.required, Validators.minLength(5)]);\n      this.newAttendedBy = this.fb.control('', [Validators.required, Validators.minLength(2)]);\n      this.isUpdating = false;\n      // Options (reuse from enquiry form)\n      this.incomeSources = [{\n        value: 'salary',\n        label: 'Salary'\n      }, {\n        value: 'business',\n        label: 'Business'\n      }, {\n        value: 'freelance',\n        label: 'Freelance'\n      }, {\n        value: 'pension',\n        label: 'Pension'\n      }, {\n        value: 'investment',\n        label: 'Investment'\n      }, {\n        value: 'other',\n        label: 'Other'\n      }];\n      this.referenceOptions = [{\n        value: 'social_media',\n        label: 'Social Media'\n      }, {\n        value: 'friend',\n        label: 'Friend'\n      }, {\n        value: 'advertisement',\n        label: 'Advertisement'\n      }, {\n        value: 'website',\n        label: 'Website'\n      }, {\n        value: 'agent',\n        label: 'Agent'\n      }, {\n        value: 'other',\n        label: 'Other'\n      }];\n      this.propertyInterests = [{\n        value: 'studio-apt',\n        label: 'Studio Apt'\n      }, {\n        value: '1-bhk',\n        label: '1 BHK'\n      }, {\n        value: '2-bhk',\n        label: '2 BHK'\n      }, {\n        value: '3-bhk',\n        label: '3 BHK'\n      }, {\n        value: 'jodi-flat',\n        label: 'JodiFlat'\n      }];\n      this.searchForm = this.fb.group({\n        mobileNumber: ['', [Validators.required, Validators.pattern('^[0-9]{10}$')]]\n      });\n      this.customerForm = this.fb.group({\n        firstName: ['', [Validators.required, Validators.minLength(2), Validators.maxLength(50)]],\n        lastName: ['', [Validators.required, Validators.minLength(2), Validators.maxLength(50)]],\n        email: ['', [Validators.required, Validators.email]],\n        mobile: ['', [Validators.required, Validators.pattern('^[0-9]{10}$')]],\n        address: ['', [Validators.required, Validators.minLength(10), Validators.maxLength(500)]],\n        age: ['', [Validators.required, Validators.min(18), Validators.max(100)]],\n        incomeSource: ['', Validators.required],\n        income: ['', [Validators.required, Validators.min(10000), Validators.max(10000000)]],\n        budget: ['', [Validators.required, Validators.min(100000), Validators.max(100000000)]],\n        reference: ['', Validators.required],\n        referencePerson: [''],\n        propertyInterests: this.fb.group({\n          'studio-apt': [false],\n          '1-bhk': [false],\n          '2-bhk': [false],\n          '3-bhk': [false],\n          'jodi-flat': [false]\n        }),\n        remarks: [''],\n        attendedBy: [''],\n        status: [''],\n        submittedAt: ['']\n      });\n    }\n    ngOnInit() {\n      this.initEnquiryForm();\n      this.setupReferenceValidation();\n    }\n    // --- Enquiry Form Logic ---\n    initEnquiryForm() {\n      this.enquiryForm = this.fb.group({\n        firstName: ['', [Validators.required, Validators.minLength(2), Validators.maxLength(50)]],\n        lastName: ['', [Validators.required, Validators.minLength(2), Validators.maxLength(50)]],\n        email: ['', [Validators.required, Validators.email]],\n        mobile: ['', [Validators.required, Validators.pattern('^[0-9]{10}$')]],\n        address: ['', [Validators.required, Validators.minLength(10), Validators.maxLength(500)]],\n        age: ['', [Validators.required, Validators.min(18), Validators.max(100)]],\n        incomeSource: ['', Validators.required],\n        monthlyIncome: ['', [Validators.required, Validators.min(10000), Validators.max(10000000)]],\n        budget: ['', [Validators.required, Validators.min(100000), Validators.max(100000000)]],\n        reference: ['', Validators.required],\n        referencePerson: [''],\n        remarks: ['', [Validators.required, Validators.minLength(10), Validators.maxLength(1000)]],\n        attendedBy: ['', [Validators.required, Validators.minLength(2), Validators.maxLength(100)]],\n        propertyInterests: this.fb.group({\n          'studio-apt': [false],\n          '1-bhk': [false],\n          '2-bhk': [false],\n          '3-bhk': [false],\n          'jodi-flat': [false]\n        }, {\n          validators: this.atLeastOneSelected\n        })\n      });\n    }\n    setupReferenceValidation() {\n      this.enquiryForm.get('reference')?.valueChanges.subscribe(value => {\n        const referencePersonControl = this.enquiryForm.get('referencePerson');\n        if (value === 'friend' || value === 'agent') {\n          referencePersonControl?.setValidators([Validators.required, Validators.minLength(2), Validators.maxLength(100)]);\n        } else {\n          referencePersonControl?.clearValidators();\n          referencePersonControl?.setValue('');\n        }\n        referencePersonControl?.updateValueAndValidity();\n      });\n    }\n    atLeastOneSelected(group) {\n      const selected = Object.values(group.value).some(value => value === true);\n      return selected ? null : {\n        atLeastOneRequired: true\n      };\n    }\n    get f() {\n      return this.enquiryForm.controls;\n    }\n    get propertyInterestsGroup() {\n      return this.enquiryForm.get('propertyInterests');\n    }\n    get searchF() {\n      return this.searchForm.controls;\n    }\n    shouldShowReferencePerson() {\n      const referenceValue = this.enquiryForm.get('reference')?.value;\n      return referenceValue === 'friend' || referenceValue === 'agent';\n    }\n    onInterestChange(event, interest) {\n      const checked = event.target.checked;\n      this.propertyInterestsGroup.patchValue({\n        [interest]: checked\n      });\n      this.propertyInterestsGroup.updateValueAndValidity();\n    }\n    // --- Add New Customer ---\n    onAddSubmit() {\n      this.submitted = true;\n      this.addErrorMsg = '';\n      this.addSuccessMsg = '';\n      if (this.enquiryForm.valid) {\n        this.isLoading = true;\n        const customerData = this.mapFormDataToApiPayload();\n        this.enquiryService.submitCustomerEnquiry(customerData).subscribe({\n          next: () => {\n            this.isLoading = false;\n            this.addSuccessMsg = 'Customer enquiry submitted successfully!';\n            this.enquiryForm.reset();\n            this.submitted = false;\n          },\n          error: error => {\n            this.isLoading = false;\n            this.addErrorMsg = error.error?.message || 'Submission failed. Please try again.';\n          }\n        });\n      }\n    }\n    // --- Search Existing Customer ---\n    onSearchSubmit() {\n      this.searchSubmitted = true;\n      this.searchErrorMsg = '';\n      this.foundCustomer = null;\n      if (this.searchForm.valid) {\n        this.searchLoading = true;\n        const mobile = this.searchForm.value.mobileNumber;\n        this.enquiryService.getCustomerByMobile(mobile).subscribe({\n          next: res => {\n            this.searchLoading = false;\n            this.foundCustomer = res?.data || null;\n            if (!this.foundCustomer) {\n              this.searchErrorMsg = 'No customer found with this mobile number.';\n            } else {\n              this.populateCustomerForm(this.foundCustomer);\n            }\n          },\n          error: error => {\n            this.searchLoading = false;\n            this.searchErrorMsg = error.error?.message || 'Search failed. Please try again.';\n          }\n        });\n      }\n    }\n    populateCustomerForm(customer) {\n      this.customerForm.patchValue({\n        firstName: customer.firstName,\n        lastName: customer.lastName,\n        email: customer.email,\n        mobile: customer.mobile,\n        address: customer.address,\n        age: customer.age,\n        incomeSource: customer.incomeSource,\n        income: customer.income,\n        budget: customer.budget,\n        reference: customer.reference,\n        referencePerson: customer.referencePerson || '',\n        status: customer.status || '',\n        submittedAt: customer.submittedAt || ''\n      });\n      // Set property interests\n      if (customer.propertyInterests) {\n        const propertyInterestsGroup = this.customerForm.get('propertyInterests');\n        Object.keys(customer.propertyInterests).forEach(key => {\n          if (propertyInterestsGroup.get(key)) {\n            propertyInterestsGroup.get(key)?.setValue(customer.propertyInterests[key]);\n          }\n        });\n      }\n      // Set remarks and attendedBy from the first remark entry\n      if (customer.remarks && customer.remarks.length > 0) {\n        const firstRemark = customer.remarks[0];\n        this.customerForm.patchValue({\n          remarks: firstRemark.remark,\n          attendedBy: firstRemark.attendedBy\n        });\n      }\n      this.customerForm.get('remarks')?.enable();\n      this.customerForm.get('attendedBy')?.enable();\n    }\n    updateCustomer() {\n      if (this.newRemark.invalid || this.newAttendedBy.invalid) return;\n      if (!this.foundCustomer?.id) {\n        this.searchErrorMsg = 'Customer ID is missing.';\n        return;\n      }\n      this.isUpdating = true;\n      const updatedRemarks = [...(this.foundCustomer?.remarks || []), {\n        remark: this.newRemark.value,\n        attendedBy: this.newAttendedBy.value,\n        visitDate: new Date().toISOString()\n      }];\n      const formValue = this.customerForm.getRawValue();\n      let referencePersonValue = null;\n      if (formValue.reference === 'friend' || formValue.reference === 'agent') {\n        referencePersonValue = formValue.referencePerson;\n      }\n      const payload = {\n        id: this.foundCustomer.id,\n        firstName: formValue.firstName,\n        lastName: formValue.lastName,\n        email: formValue.email,\n        address: formValue.address,\n        age: formValue.age,\n        incomeSource: formValue.incomeSource,\n        income: formValue.income,\n        budget: formValue.budget,\n        reference: formValue.reference,\n        referencePerson: referencePersonValue,\n        propertyInterests: formValue.propertyInterests,\n        status: formValue.status,\n        submittedAt: formValue.submittedAt,\n        remarks: updatedRemarks\n      };\n      this.enquiryService.updateCustomer(this.foundCustomer.id, payload).subscribe({\n        next: res => {\n          this.isUpdating = false;\n          this.newRemark.reset();\n          this.newAttendedBy.reset();\n          this.onSearchSubmit(); // Refresh details\n        },\n        error: err => {\n          this.isUpdating = false;\n          this.searchErrorMsg = err?.error?.message || 'Update failed';\n        }\n      });\n    }\n    // --- Utility ---\n    mapFormDataToApiPayload() {\n      const formValue = this.enquiryForm.value;\n      const propertyInterestsMap = {};\n      if (formValue.propertyInterests) {\n        Object.keys(formValue.propertyInterests).forEach(key => {\n          propertyInterestsMap[key] = Boolean(formValue.propertyInterests[key]);\n        });\n      } else {\n        this.propertyInterests.forEach(interest => {\n          propertyInterestsMap[interest.value] = false;\n        });\n      }\n      const remarksArray = [{\n        remark: formValue.remarks,\n        attendedBy: formValue.attendedBy,\n        visitDate: new Date().toISOString()\n      }];\n      return {\n        firstName: formValue.firstName,\n        lastName: formValue.lastName,\n        email: formValue.email,\n        mobile: formValue.mobile,\n        address: formValue.address,\n        age: formValue.age,\n        incomeSource: formValue.incomeSource,\n        income: formValue.monthlyIncome,\n        budget: formValue.budget,\n        reference: formValue.reference,\n        referencePerson: formValue.referencePerson || undefined,\n        propertyInterests: propertyInterestsMap,\n        remarks: remarksArray\n      };\n    }\n    static {\n      this.ɵfac = function CustomersComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || CustomersComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.EnquiryFormService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: CustomersComponent,\n        selectors: [[\"ng-component\"]],\n        decls: 8,\n        vars: 6,\n        consts: [[1, \"customer-details-container\"], [1, \"mode-toggle\"], [3, \"click\"], [4, \"ngIf\"], [\"class\", \"search-section\", 4, \"ngIf\"], [1, \"search-section\"], [\"class\", \"error-message\", 4, \"ngIf\"], [\"class\", \"customer-details\", 4, \"ngIf\"], [1, \"error-message\"], [1, \"customer-details\"]],\n        template: function CustomersComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2);\n            i0.ɵɵlistener(\"click\", function CustomersComponent_Template_button_click_2_listener() {\n              return ctx.mode = \"add\";\n            });\n            i0.ɵɵtext(3, \"Add New Customer\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"button\", 2);\n            i0.ɵɵlistener(\"click\", function CustomersComponent_Template_button_click_4_listener() {\n              return ctx.mode = \"search\";\n            });\n            i0.ɵɵtext(5, \"Search Existing Customer\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(6, CustomersComponent_div_6_Template, 2, 0, \"div\", 3)(7, CustomersComponent_div_7_Template, 4, 2, \"div\", 4);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵclassProp(\"active\", ctx.mode === \"add\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵclassProp(\"active\", ctx.mode === \"search\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.mode === \"add\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.mode === \"search\");\n          }\n        },\n        dependencies: [CommonModule, i3.NgIf, ReactiveFormsModule, EnquiryFormComponent, CustomerDetailsComponent],\n        styles: [\"@charset \\\"UTF-8\\\";\\n.customer-details-container[_ngcontent-%COMP%] {\\n  max-width: 1000px;\\n  margin: var(--space-xl) auto;\\n  background: var(--white);\\n  border-radius: var(--radius-xl);\\n  box-shadow: var(--shadow-xl);\\n  border: 1px solid var(--gray-200);\\n  padding: var(--space-2xl);\\n  position: relative;\\n}\\n.customer-details-container[_ngcontent-%COMP%]::before {\\n  content: \\\"\\\";\\n  position: absolute;\\n  top: -1px;\\n  left: -1px;\\n  right: -1px;\\n  height: 6px;\\n  background: var(--gradient-primary);\\n  border-radius: var(--radius-xl) var(--radius-xl) 0 0;\\n}\\n\\n.mode-toggle[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  margin-bottom: var(--space-2xl);\\n  gap: var(--space-sm);\\n  background: var(--gray-100);\\n  padding: var(--space-xs);\\n  border-radius: var(--radius-lg);\\n}\\n.mode-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n  flex: 1;\\n  max-width: 200px;\\n  padding: var(--space-md) var(--space-lg);\\n  border: none;\\n  border-radius: var(--radius-md);\\n  background: transparent;\\n  color: var(--gray-600);\\n  font-weight: 600;\\n  font-size: 0.875rem;\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n  letter-spacing: 0.025em;\\n}\\n.mode-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover {\\n  background: var(--white);\\n  color: var(--gray-700);\\n  box-shadow: var(--shadow-sm);\\n}\\n.mode-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%] {\\n  background: var(--gradient-primary);\\n  color: var(--white);\\n  box-shadow: var(--shadow-md);\\n  transform: translateY(-1px);\\n}\\n\\n.enquiry-form[_ngcontent-%COMP%], \\n.search-form[_ngcontent-%COMP%], \\n.customer-form[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: var(--space-lg);\\n}\\n\\n.form-row[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  gap: var(--space-sm);\\n}\\n.form-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\n  font-weight: 600;\\n  color: var(--gray-700);\\n  font-size: 0.875rem;\\n  letter-spacing: 0.025em;\\n}\\n\\ninput[_ngcontent-%COMP%], \\nselect[_ngcontent-%COMP%], \\ntextarea[_ngcontent-%COMP%] {\\n  padding: var(--space-md) var(--space-lg);\\n  border: 1px solid var(--gray-300);\\n  border-radius: var(--radius-md);\\n  font-size: 0.875rem;\\n  background: var(--white);\\n  transition: all 0.2s ease;\\n  font-family: inherit;\\n}\\ninput[_ngcontent-%COMP%]::placeholder, \\nselect[_ngcontent-%COMP%]::placeholder, \\ntextarea[_ngcontent-%COMP%]::placeholder {\\n  color: var(--gray-400);\\n}\\ninput[_ngcontent-%COMP%]:focus, \\nselect[_ngcontent-%COMP%]:focus, \\ntextarea[_ngcontent-%COMP%]:focus {\\n  border-color: var(--primary-blue);\\n  outline: none;\\n  background: var(--white);\\n  box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);\\n}\\ninput.error[_ngcontent-%COMP%], \\nselect.error[_ngcontent-%COMP%], \\ntextarea.error[_ngcontent-%COMP%] {\\n  border-color: var(--error);\\n  background: rgba(239, 68, 68, 0.05);\\n}\\ninput.error[_ngcontent-%COMP%]:focus, \\nselect.error[_ngcontent-%COMP%]:focus, \\ntextarea.error[_ngcontent-%COMP%]:focus {\\n  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);\\n}\\n\\nselect[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n  background-image: url(\\\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23475569' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e\\\");\\n  background-position: right var(--space-md) center;\\n  background-repeat: no-repeat;\\n  background-size: 16px;\\n  padding-right: 3rem;\\n  appearance: none;\\n}\\n\\ntextarea[_ngcontent-%COMP%] {\\n  resize: vertical;\\n  min-height: 100px;\\n  line-height: 1.5;\\n}\\n\\nbutton[type=submit][_ngcontent-%COMP%], \\nbutton[type=button][_ngcontent-%COMP%] {\\n  margin-top: var(--space-md);\\n  padding: var(--space-md) var(--space-xl);\\n  background: var(--gradient-primary);\\n  color: var(--white);\\n  border: none;\\n  border-radius: var(--radius-md);\\n  font-size: 0.875rem;\\n  font-weight: 600;\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n  min-height: 48px;\\n  letter-spacing: 0.025em;\\n}\\nbutton[type=submit][_ngcontent-%COMP%]:hover:not(:disabled), \\nbutton[type=button][_ngcontent-%COMP%]:hover:not(:disabled) {\\n  transform: translateY(-1px);\\n  box-shadow: var(--shadow-lg);\\n}\\nbutton[type=submit][_ngcontent-%COMP%]:active:not(:disabled), \\nbutton[type=button][_ngcontent-%COMP%]:active:not(:disabled) {\\n  transform: translateY(0);\\n}\\nbutton[type=submit][_ngcontent-%COMP%]:disabled, \\nbutton[type=button][_ngcontent-%COMP%]:disabled {\\n  background: var(--gray-400);\\n  cursor: not-allowed;\\n  opacity: 0.7;\\n  transform: none;\\n}\\n\\n.error-message[_ngcontent-%COMP%] {\\n  color: var(--error);\\n  font-size: 0.75rem;\\n  font-weight: 500;\\n  margin-top: var(--space-xs);\\n  display: flex;\\n  align-items: center;\\n  gap: var(--space-xs);\\n}\\n.error-message[_ngcontent-%COMP%]::before {\\n  content: \\\"\\u26A0\\\";\\n  font-size: 0.875rem;\\n}\\n\\n.success-message[_ngcontent-%COMP%] {\\n  color: var(--success);\\n  font-size: 0.875rem;\\n  font-weight: 500;\\n  margin-top: var(--space-xs);\\n  display: flex;\\n  align-items: center;\\n  gap: var(--space-xs);\\n}\\n.success-message[_ngcontent-%COMP%]::before {\\n  content: \\\"\\u2713\\\";\\n  font-size: 1rem;\\n}\\n\\n.property-interests[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\\n  gap: var(--space-md);\\n  margin-top: var(--space-md);\\n}\\n.property-interests[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: var(--space-sm);\\n  padding: var(--space-md);\\n  border: 1px solid var(--gray-300);\\n  border-radius: var(--radius-md);\\n  background: var(--white);\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n}\\n.property-interests[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover {\\n  border-color: var(--primary-blue);\\n  background: rgba(30, 58, 138, 0.02);\\n}\\n.property-interests[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] {\\n  width: 18px;\\n  height: 18px;\\n  margin: 0;\\n  accent-color: var(--primary-blue);\\n}\\n\\n.search-section[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%] {\\n  margin-top: var(--space-xl);\\n  background: var(--gray-50);\\n  border-radius: var(--radius-lg);\\n  padding: var(--space-xl);\\n  border: 1px solid var(--gray-200);\\n}\\n.search-section[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  margin-top: 0;\\n  color: var(--gray-800);\\n  font-size: 1.25rem;\\n  font-weight: 600;\\n  margin-bottom: var(--space-lg);\\n  padding-bottom: var(--space-md);\\n  border-bottom: 1px solid var(--gray-300);\\n}\\n.search-section[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n  list-style: none;\\n  margin: var(--space-md) 0 0 0;\\n  padding: 0;\\n}\\n.search-section[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n  margin-bottom: var(--space-sm);\\n  padding: var(--space-md);\\n  background: var(--white);\\n  border-radius: var(--radius-md);\\n  border: 1px solid var(--gray-200);\\n  box-shadow: var(--shadow-sm);\\n  color: var(--gray-700);\\n  font-size: 0.875rem;\\n  line-height: 1.5;\\n}\\n.search-section[_ngcontent-%COMP%]   .customer-details[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover {\\n  box-shadow: var(--shadow-md);\\n}\\n\\n.section-header[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  gap: var(--space-sm);\\n  margin-bottom: var(--space-xl);\\n  padding-bottom: var(--space-md);\\n  border-bottom: 2px solid var(--gray-200);\\n}\\n.section-header[_ngcontent-%COMP%]::before {\\n  content: \\\"\\\";\\n  width: 4px;\\n  height: 24px;\\n  background: var(--gradient-primary);\\n  border-radius: 2px;\\n}\\n.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  color: var(--gray-800);\\n  font-size: 1.5rem;\\n  font-weight: 600;\\n  margin: 0;\\n}\\n\\n@media (max-width: 768px) {\\n  .customer-details-container[_ngcontent-%COMP%] {\\n    margin: var(--space-lg) var(--space-md);\\n    padding: var(--space-xl) var(--space-lg);\\n  }\\n  .mode-toggle[_ngcontent-%COMP%] {\\n    flex-direction: column;\\n    gap: var(--space-sm);\\n  }\\n  .mode-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n    max-width: none;\\n  }\\n  .property-interests[_ngcontent-%COMP%]   .checkbox-group[_ngcontent-%COMP%] {\\n    grid-template-columns: 1fr;\\n  }\\n}\\n@media (max-width: 480px) {\\n  .customer-details-container[_ngcontent-%COMP%] {\\n    margin: var(--space-md);\\n    padding: var(--space-lg) var(--space-md);\\n  }\\n  input[_ngcontent-%COMP%], \\n   select[_ngcontent-%COMP%], \\n   textarea[_ngcontent-%COMP%] {\\n    padding: var(--space-sm) var(--space-md);\\n  }\\n  button[type=submit][_ngcontent-%COMP%], \\n   button[type=button][_ngcontent-%COMP%] {\\n    min-height: 44px;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY3VzdG9tZXJzL2N1c3RvbWVycy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUFBaEI7RUFDRSxpQkFBQTtFQUNBLDRCQUFBO0VBQ0Esd0JBQUE7RUFDQSwrQkFBQTtFQUNBLDRCQUFBO0VBQ0EsaUNBQUE7RUFDQSx5QkFBQTtFQUNBLGtCQUFBO0FBRUY7QUFBRTtFQUNFLFdBQUE7RUFDQSxrQkFBQTtFQUNBLFNBQUE7RUFDQSxVQUFBO0VBQ0EsV0FBQTtFQUNBLFdBQUE7RUFDQSxtQ0FBQTtFQUNBLG9EQUFBO0FBRUo7O0FBRUE7RUFDRSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSwrQkFBQTtFQUNBLG9CQUFBO0VBQ0EsMkJBQUE7RUFDQSx3QkFBQTtFQUNBLCtCQUFBO0FBQ0Y7QUFDRTtFQUNFLE9BQUE7RUFDQSxnQkFBQTtFQUNBLHdDQUFBO0VBQ0EsWUFBQTtFQUNBLCtCQUFBO0VBQ0EsdUJBQUE7RUFDQSxzQkFBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7RUFDQSxlQUFBO0VBQ0EseUJBQUE7RUFDQSx1QkFBQTtBQUNKO0FBQ0k7RUFDRSx3QkFBQTtFQUNBLHNCQUFBO0VBQ0EsNEJBQUE7QUFDTjtBQUVJO0VBQ0UsbUNBQUE7RUFDQSxtQkFBQTtFQUNBLDRCQUFBO0VBQ0EsMkJBQUE7QUFBTjs7QUFLQTs7O0VBR0UsYUFBQTtFQUNBLHNCQUFBO0VBQ0Esb0JBQUE7QUFGRjs7QUFLQTtFQUNFLGFBQUE7RUFDQSxzQkFBQTtFQUNBLG9CQUFBO0FBRkY7QUFJRTtFQUNFLGdCQUFBO0VBQ0Esc0JBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0FBRko7O0FBTUE7OztFQUdFLHdDQUFBO0VBQ0EsaUNBQUE7RUFDQSwrQkFBQTtFQUNBLG1CQUFBO0VBQ0Esd0JBQUE7RUFDQSx5QkFBQTtFQUNBLG9CQUFBO0FBSEY7QUFLRTs7O0VBQ0Usc0JBQUE7QUFESjtBQUlFOzs7RUFDRSxpQ0FBQTtFQUNBLGFBQUE7RUFDQSx3QkFBQTtFQUNBLDRDQUFBO0FBQUo7QUFHRTs7O0VBQ0UsMEJBQUE7RUFDQSxtQ0FBQTtBQUNKO0FBQ0k7OztFQUNFLDRDQUFBO0FBR047O0FBRUE7RUFDRSxlQUFBO0VBQ0EsbVBBQUE7RUFDQSxpREFBQTtFQUNBLDRCQUFBO0VBQ0EscUJBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxnQkFBQTtFQUNBLGlCQUFBO0VBQ0EsZ0JBQUE7QUFDRjs7QUFFQTs7RUFFRSwyQkFBQTtFQUNBLHdDQUFBO0VBQ0EsbUNBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7RUFDQSwrQkFBQTtFQUNBLG1CQUFBO0VBQ0EsZ0JBQUE7RUFDQSxlQUFBO0VBQ0EseUJBQUE7RUFDQSxnQkFBQTtFQUNBLHVCQUFBO0FBQ0Y7QUFDRTs7RUFDRSwyQkFBQTtFQUNBLDRCQUFBO0FBRUo7QUFDRTs7RUFDRSx3QkFBQTtBQUVKO0FBQ0U7O0VBQ0UsMkJBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0FBRUo7O0FBRUE7RUFDRSxtQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZ0JBQUE7RUFDQSwyQkFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLG9CQUFBO0FBQ0Y7QUFDRTtFQUNFLFlBQUE7RUFDQSxtQkFBQTtBQUNKOztBQUdBO0VBQ0UscUJBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0VBQ0EsMkJBQUE7RUFDQSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxvQkFBQTtBQUFGO0FBRUU7RUFDRSxZQUFBO0VBQ0EsZUFBQTtBQUFKOztBQUtFO0VBQ0UsYUFBQTtFQUNBLDJEQUFBO0VBQ0Esb0JBQUE7RUFDQSwyQkFBQTtBQUZKO0FBSUk7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxvQkFBQTtFQUNBLHdCQUFBO0VBQ0EsaUNBQUE7RUFDQSwrQkFBQTtFQUNBLHdCQUFBO0VBQ0EsZUFBQTtFQUNBLHlCQUFBO0FBRk47QUFJTTtFQUNFLGlDQUFBO0VBQ0EsbUNBQUE7QUFGUjtBQUtNO0VBQ0UsV0FBQTtFQUNBLFlBQUE7RUFDQSxTQUFBO0VBQ0EsaUNBQUE7QUFIUjs7QUFVRTtFQUNFLDJCQUFBO0VBQ0EsMEJBQUE7RUFDQSwrQkFBQTtFQUNBLHdCQUFBO0VBQ0EsaUNBQUE7QUFQSjtBQVNJO0VBQ0UsYUFBQTtFQUNBLHNCQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLDhCQUFBO0VBQ0EsK0JBQUE7RUFDQSx3Q0FBQTtBQVBOO0FBV007RUFDRSxnQkFBQTtFQUNBLDZCQUFBO0VBQ0EsVUFBQTtBQVRSO0FBV1E7RUFDRSw4QkFBQTtFQUNBLHdCQUFBO0VBQ0Esd0JBQUE7RUFDQSwrQkFBQTtFQUNBLGlDQUFBO0VBQ0EsNEJBQUE7RUFDQSxzQkFBQTtFQUNBLG1CQUFBO0VBQ0EsZ0JBQUE7QUFUVjtBQVdVO0VBQ0UsNEJBQUE7QUFUWjs7QUFrQkE7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxvQkFBQTtFQUNBLDhCQUFBO0VBQ0EsK0JBQUE7RUFDQSx3Q0FBQTtBQWZGO0FBaUJFO0VBQ0UsV0FBQTtFQUNBLFVBQUE7RUFDQSxZQUFBO0VBQ0EsbUNBQUE7RUFDQSxrQkFBQTtBQWZKO0FBa0JFO0VBQ0Usc0JBQUE7RUFDQSxpQkFBQTtFQUNBLGdCQUFBO0VBQ0EsU0FBQTtBQWhCSjs7QUFxQkE7RUFDRTtJQUNFLHVDQUFBO0lBQ0Esd0NBQUE7RUFsQkY7RUFxQkE7SUFDRSxzQkFBQTtJQUNBLG9CQUFBO0VBbkJGO0VBcUJFO0lBQ0UsZUFBQTtFQW5CSjtFQXVCQTtJQUNFLDBCQUFBO0VBckJGO0FBQ0Y7QUF3QkE7RUFDRTtJQUNFLHVCQUFBO0lBQ0Esd0NBQUE7RUF0QkY7RUF5QkE7OztJQUdFLHdDQUFBO0VBdkJGO0VBMEJBOztJQUVFLGdCQUFBO0VBeEJGO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIuY3VzdG9tZXItZGV0YWlscy1jb250YWluZXIge1xyXG4gIG1heC13aWR0aDogMTAwMHB4O1xyXG4gIG1hcmdpbjogdmFyKC0tc3BhY2UteGwpIGF1dG87XHJcbiAgYmFja2dyb3VuZDogdmFyKC0td2hpdGUpO1xyXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy14bCk7XHJcbiAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LXhsKTtcclxuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ncmF5LTIwMCk7XHJcbiAgcGFkZGluZzogdmFyKC0tc3BhY2UtMnhsKTtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgXHJcbiAgJjo6YmVmb3JlIHtcclxuICAgIGNvbnRlbnQ6ICcnO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgdG9wOiAtMXB4O1xyXG4gICAgbGVmdDogLTFweDtcclxuICAgIHJpZ2h0OiAtMXB4O1xyXG4gICAgaGVpZ2h0OiA2cHg7XHJcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1ncmFkaWVudC1wcmltYXJ5KTtcclxuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy14bCkgdmFyKC0tcmFkaXVzLXhsKSAwIDA7XHJcbiAgfVxyXG59XHJcblxyXG4ubW9kZS10b2dnbGUge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgbWFyZ2luLWJvdHRvbTogdmFyKC0tc3BhY2UtMnhsKTtcclxuICBnYXA6IHZhcigtLXNwYWNlLXNtKTtcclxuICBiYWNrZ3JvdW5kOiB2YXIoLS1ncmF5LTEwMCk7XHJcbiAgcGFkZGluZzogdmFyKC0tc3BhY2UteHMpO1xyXG4gIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1sZyk7XHJcbiAgXHJcbiAgYnV0dG9uIHtcclxuICAgIGZsZXg6IDE7XHJcbiAgICBtYXgtd2lkdGg6IDIwMHB4O1xyXG4gICAgcGFkZGluZzogdmFyKC0tc3BhY2UtbWQpIHZhcigtLXNwYWNlLWxnKTtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1tZCk7XHJcbiAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcclxuICAgIGNvbG9yOiB2YXIoLS1ncmF5LTYwMCk7XHJcbiAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgZm9udC1zaXplOiAwLjg3NXJlbTtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XHJcbiAgICBsZXR0ZXItc3BhY2luZzogMC4wMjVlbTtcclxuICAgIFxyXG4gICAgJjpob3ZlciB7XHJcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlKTtcclxuICAgICAgY29sb3I6IHZhcigtLWdyYXktNzAwKTtcclxuICAgICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LXNtKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgJi5hY3RpdmUge1xyXG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1ncmFkaWVudC1wcmltYXJ5KTtcclxuICAgICAgY29sb3I6IHZhcigtLXdoaXRlKTtcclxuICAgICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LW1kKTtcclxuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xcHgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLmVucXVpcnktZm9ybSwgXHJcbi5zZWFyY2gtZm9ybSwgXHJcbi5jdXN0b21lci1mb3JtIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgZ2FwOiB2YXIoLS1zcGFjZS1sZyk7XHJcbn1cclxuXHJcbi5mb3JtLXJvdyB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gIGdhcDogdmFyKC0tc3BhY2Utc20pO1xyXG4gIFxyXG4gIGxhYmVsIHtcclxuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XHJcbiAgICBjb2xvcjogdmFyKC0tZ3JheS03MDApO1xyXG4gICAgZm9udC1zaXplOiAwLjg3NXJlbTtcclxuICAgIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xyXG4gIH1cclxufVxyXG5cclxuaW5wdXQsIFxyXG5zZWxlY3QsIFxyXG50ZXh0YXJlYSB7XHJcbiAgcGFkZGluZzogdmFyKC0tc3BhY2UtbWQpIHZhcigtLXNwYWNlLWxnKTtcclxuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ncmF5LTMwMCk7XHJcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTtcclxuICBmb250LXNpemU6IDAuODc1cmVtO1xyXG4gIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlKTtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xyXG4gIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xyXG4gIFxyXG4gICY6OnBsYWNlaG9sZGVyIHtcclxuICAgIGNvbG9yOiB2YXIoLS1ncmF5LTQwMCk7XHJcbiAgfVxyXG4gIFxyXG4gICY6Zm9jdXMge1xyXG4gICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1wcmltYXJ5LWJsdWUpO1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlKTtcclxuICAgIGJveC1zaGFkb3c6IDAgMCAwIDNweCByZ2JhKDMwLCA1OCwgMTM4LCAwLjEpO1xyXG4gIH1cclxuICBcclxuICAmLmVycm9yIHtcclxuICAgIGJvcmRlci1jb2xvcjogdmFyKC0tZXJyb3IpO1xyXG4gICAgYmFja2dyb3VuZDogcmdiYSgyMzksIDY4LCA2OCwgMC4wNSk7XHJcbiAgICBcclxuICAgICY6Zm9jdXMge1xyXG4gICAgICBib3gtc2hhZG93OiAwIDAgMCAzcHggcmdiYSgyMzksIDY4LCA2OCwgMC4xKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbnNlbGVjdCB7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM2NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyBmaWxsPSdub25lJyB2aWV3Qm94PScwIDAgMjAgMjAnJTNlJTNjcGF0aCBzdHJva2U9JyUyMzQ3NTU2OScgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBzdHJva2Utd2lkdGg9JzEuNScgZD0nbTYgOCA0IDQgNC00Jy8lM2UlM2Mvc3ZnJTNlXCIpO1xyXG4gIGJhY2tncm91bmQtcG9zaXRpb246IHJpZ2h0IHZhcigtLXNwYWNlLW1kKSBjZW50ZXI7XHJcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcclxuICBiYWNrZ3JvdW5kLXNpemU6IDE2cHg7XHJcbiAgcGFkZGluZy1yaWdodDogM3JlbTtcclxuICBhcHBlYXJhbmNlOiBub25lO1xyXG59XHJcblxyXG50ZXh0YXJlYSB7XHJcbiAgcmVzaXplOiB2ZXJ0aWNhbDtcclxuICBtaW4taGVpZ2h0OiAxMDBweDtcclxuICBsaW5lLWhlaWdodDogMS41O1xyXG59XHJcblxyXG5idXR0b25bdHlwZT1cInN1Ym1pdFwiXSwgXHJcbmJ1dHRvblt0eXBlPVwiYnV0dG9uXCJdIHtcclxuICBtYXJnaW4tdG9wOiB2YXIoLS1zcGFjZS1tZCk7XHJcbiAgcGFkZGluZzogdmFyKC0tc3BhY2UtbWQpIHZhcigtLXNwYWNlLXhsKTtcclxuICBiYWNrZ3JvdW5kOiB2YXIoLS1ncmFkaWVudC1wcmltYXJ5KTtcclxuICBjb2xvcjogdmFyKC0td2hpdGUpO1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbWQpO1xyXG4gIGZvbnQtc2l6ZTogMC44NzVyZW07XHJcbiAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcclxuICBtaW4taGVpZ2h0OiA0OHB4O1xyXG4gIGxldHRlci1zcGFjaW5nOiAwLjAyNWVtO1xyXG4gIFxyXG4gICY6aG92ZXI6bm90KDpkaXNhYmxlZCkge1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xcHgpO1xyXG4gICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LWxnKTtcclxuICB9XHJcbiAgXHJcbiAgJjphY3RpdmU6bm90KDpkaXNhYmxlZCkge1xyXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApO1xyXG4gIH1cclxuICBcclxuICAmOmRpc2FibGVkIHtcclxuICAgIGJhY2tncm91bmQ6IHZhcigtLWdyYXktNDAwKTtcclxuICAgIGN1cnNvcjogbm90LWFsbG93ZWQ7XHJcbiAgICBvcGFjaXR5OiAwLjc7XHJcbiAgICB0cmFuc2Zvcm06IG5vbmU7XHJcbiAgfVxyXG59XHJcblxyXG4uZXJyb3ItbWVzc2FnZSB7XHJcbiAgY29sb3I6IHZhcigtLWVycm9yKTtcclxuICBmb250LXNpemU6IDAuNzVyZW07XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICBtYXJnaW4tdG9wOiB2YXIoLS1zcGFjZS14cyk7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGdhcDogdmFyKC0tc3BhY2UteHMpO1xyXG4gIFxyXG4gICY6OmJlZm9yZSB7XHJcbiAgICBjb250ZW50OiAnw6LCmsKgJztcclxuICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XHJcbiAgfVxyXG59XHJcblxyXG4uc3VjY2Vzcy1tZXNzYWdlIHtcclxuICBjb2xvcjogdmFyKC0tc3VjY2Vzcyk7XHJcbiAgZm9udC1zaXplOiAwLjg3NXJlbTtcclxuICBmb250LXdlaWdodDogNTAwO1xyXG4gIG1hcmdpbi10b3A6IHZhcigtLXNwYWNlLXhzKTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgZ2FwOiB2YXIoLS1zcGFjZS14cyk7XHJcbiAgXHJcbiAgJjo6YmVmb3JlIHtcclxuICAgIGNvbnRlbnQ6ICfDosKcwpMnO1xyXG4gICAgZm9udC1zaXplOiAxcmVtO1xyXG4gIH1cclxufVxyXG5cclxuLnByb3BlcnR5LWludGVyZXN0cyB7XHJcbiAgLmNoZWNrYm94LWdyb3VwIHtcclxuICAgIGRpc3BsYXk6IGdyaWQ7XHJcbiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDE4MHB4LCAxZnIpKTtcclxuICAgIGdhcDogdmFyKC0tc3BhY2UtbWQpO1xyXG4gICAgbWFyZ2luLXRvcDogdmFyKC0tc3BhY2UtbWQpO1xyXG4gICAgXHJcbiAgICBsYWJlbCB7XHJcbiAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICAgIGdhcDogdmFyKC0tc3BhY2Utc20pO1xyXG4gICAgICBwYWRkaW5nOiB2YXIoLS1zcGFjZS1tZCk7XHJcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWdyYXktMzAwKTtcclxuICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW1kKTtcclxuICAgICAgYmFja2dyb3VuZDogdmFyKC0td2hpdGUpO1xyXG4gICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XHJcbiAgICAgIFxyXG4gICAgICAmOmhvdmVyIHtcclxuICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLXByaW1hcnktYmx1ZSk7XHJcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSgzMCwgNTgsIDEzOCwgMC4wMik7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXSB7XHJcbiAgICAgICAgd2lkdGg6IDE4cHg7XHJcbiAgICAgICAgaGVpZ2h0OiAxOHB4O1xyXG4gICAgICAgIG1hcmdpbjogMDtcclxuICAgICAgICBhY2NlbnQtY29sb3I6IHZhcigtLXByaW1hcnktYmx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi5zZWFyY2gtc2VjdGlvbiB7XHJcbiAgLmN1c3RvbWVyLWRldGFpbHMge1xyXG4gICAgbWFyZ2luLXRvcDogdmFyKC0tc3BhY2UteGwpO1xyXG4gICAgYmFja2dyb3VuZDogdmFyKC0tZ3JheS01MCk7XHJcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbGcpO1xyXG4gICAgcGFkZGluZzogdmFyKC0tc3BhY2UteGwpO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tZ3JheS0yMDApO1xyXG4gICAgXHJcbiAgICBoMyB7XHJcbiAgICAgIG1hcmdpbi10b3A6IDA7XHJcbiAgICAgIGNvbG9yOiB2YXIoLS1ncmF5LTgwMCk7XHJcbiAgICAgIGZvbnQtc2l6ZTogMS4yNXJlbTtcclxuICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgICAgbWFyZ2luLWJvdHRvbTogdmFyKC0tc3BhY2UtbGcpO1xyXG4gICAgICBwYWRkaW5nLWJvdHRvbTogdmFyKC0tc3BhY2UtbWQpO1xyXG4gICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tZ3JheS0zMDApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAuZm9ybS1yb3cge1xyXG4gICAgICB1bCB7XHJcbiAgICAgICAgbGlzdC1zdHlsZTogbm9uZTtcclxuICAgICAgICBtYXJnaW46IHZhcigtLXNwYWNlLW1kKSAwIDAgMDtcclxuICAgICAgICBwYWRkaW5nOiAwO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxpIHtcclxuICAgICAgICAgIG1hcmdpbi1ib3R0b206IHZhcigtLXNwYWNlLXNtKTtcclxuICAgICAgICAgIHBhZGRpbmc6IHZhcigtLXNwYWNlLW1kKTtcclxuICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXdoaXRlKTtcclxuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1tZCk7XHJcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ncmF5LTIwMCk7XHJcbiAgICAgICAgICBib3gtc2hhZG93OiB2YXIoLS1zaGFkb3ctc20pO1xyXG4gICAgICAgICAgY29sb3I6IHZhcigtLWdyYXktNzAwKTtcclxuICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XHJcbiAgICAgICAgICBsaW5lLWhlaWdodDogMS41O1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAmOmhvdmVyIHtcclxuICAgICAgICAgICAgYm94LXNoYWRvdzogdmFyKC0tc2hhZG93LW1kKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIENvcnBvcmF0ZSBoZWFkZXIgZm9yIHNlY3Rpb25zXHJcbi5zZWN0aW9uLWhlYWRlciB7XHJcbiAgZGlzcGxheTogZmxleDtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gIGdhcDogdmFyKC0tc3BhY2Utc20pO1xyXG4gIG1hcmdpbi1ib3R0b206IHZhcigtLXNwYWNlLXhsKTtcclxuICBwYWRkaW5nLWJvdHRvbTogdmFyKC0tc3BhY2UtbWQpO1xyXG4gIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCB2YXIoLS1ncmF5LTIwMCk7XHJcbiAgXHJcbiAgJjo6YmVmb3JlIHtcclxuICAgIGNvbnRlbnQ6ICcnO1xyXG4gICAgd2lkdGg6IDRweDtcclxuICAgIGhlaWdodDogMjRweDtcclxuICAgIGJhY2tncm91bmQ6IHZhcigtLWdyYWRpZW50LXByaW1hcnkpO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xyXG4gIH1cclxuICBcclxuICBoMiB7XHJcbiAgICBjb2xvcjogdmFyKC0tZ3JheS04MDApO1xyXG4gICAgZm9udC1zaXplOiAxLjVyZW07XHJcbiAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgbWFyZ2luOiAwO1xyXG4gIH1cclxufVxyXG5cclxuLy8gUmVzcG9uc2l2ZSBEZXNpZ25cclxuQG1lZGlhIChtYXgtd2lkdGg6IDc2OHB4KSB7XHJcbiAgLmN1c3RvbWVyLWRldGFpbHMtY29udGFpbmVyIHtcclxuICAgIG1hcmdpbjogdmFyKC0tc3BhY2UtbGcpIHZhcigtLXNwYWNlLW1kKTtcclxuICAgIHBhZGRpbmc6IHZhcigtLXNwYWNlLXhsKSB2YXIoLS1zcGFjZS1sZyk7XHJcbiAgfVxyXG4gIFxyXG4gIC5tb2RlLXRvZ2dsZSB7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgZ2FwOiB2YXIoLS1zcGFjZS1zbSk7XHJcbiAgICBcclxuICAgIGJ1dHRvbiB7XHJcbiAgICAgIG1heC13aWR0aDogbm9uZTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLnByb3BlcnR5LWludGVyZXN0cyAuY2hlY2tib3gtZ3JvdXAge1xyXG4gICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7XHJcbiAgfVxyXG59XHJcblxyXG5AbWVkaWEgKG1heC13aWR0aDogNDgwcHgpIHtcclxuICAuY3VzdG9tZXItZGV0YWlscy1jb250YWluZXIge1xyXG4gICAgbWFyZ2luOiB2YXIoLS1zcGFjZS1tZCk7XHJcbiAgICBwYWRkaW5nOiB2YXIoLS1zcGFjZS1sZykgdmFyKC0tc3BhY2UtbWQpO1xyXG4gIH1cclxuICBcclxuICBpbnB1dCwgXHJcbiAgc2VsZWN0LCBcclxuICB0ZXh0YXJlYSB7XHJcbiAgICBwYWRkaW5nOiB2YXIoLS1zcGFjZS1zbSkgdmFyKC0tc3BhY2UtbWQpO1xyXG4gIH1cclxuICBcclxuICBidXR0b25bdHlwZT1cInN1Ym1pdFwiXSwgXHJcbiAgYnV0dG9uW3R5cGU9XCJidXR0b25cIl0ge1xyXG4gICAgbWluLWhlaWdodDogNDRweDtcclxuICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n      });\n    }\n  }\n  return CustomersComponent;\n})();","map":{"version":3,"names":["Validators","ReactiveFormsModule","CommonModule","EnquiryFormComponent","CustomerDetailsComponent","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","searchErrorMsg","ɵɵtemplate","CustomersComponent_div_7_div_2_Template","CustomersComponent_div_7_div_3_Template","ɵɵproperty","foundCustomer","CustomersComponent","constructor","fb","enquiryService","mode","submitted","isLoading","addSuccessMsg","addErrorMsg","searchSubmitted","searchLoading","newRemark","control","required","minLength","newAttendedBy","isUpdating","incomeSources","value","label","referenceOptions","propertyInterests","searchForm","group","mobileNumber","pattern","customerForm","firstName","maxLength","lastName","email","mobile","address","age","min","max","incomeSource","income","budget","reference","referencePerson","remarks","attendedBy","status","submittedAt","ngOnInit","initEnquiryForm","setupReferenceValidation","enquiryForm","monthlyIncome","validators","atLeastOneSelected","get","valueChanges","subscribe","referencePersonControl","setValidators","clearValidators","setValue","updateValueAndValidity","selected","Object","values","some","atLeastOneRequired","f","controls","propertyInterestsGroup","searchF","shouldShowReferencePerson","referenceValue","onInterestChange","event","interest","checked","target","patchValue","onAddSubmit","valid","customerData","mapFormDataToApiPayload","submitCustomerEnquiry","next","reset","error","message","onSearchSubmit","getCustomerByMobile","res","data","populateCustomerForm","customer","keys","forEach","key","length","firstRemark","remark","enable","updateCustomer","invalid","id","updatedRemarks","visitDate","Date","toISOString","formValue","getRawValue","referencePersonValue","payload","err","propertyInterestsMap","Boolean","remarksArray","undefined","ɵɵdirectiveInject","i1","FormBuilder","i2","EnquiryFormService","selectors","decls","vars","consts","template","CustomersComponent_Template","rf","ctx","ɵɵlistener","CustomersComponent_Template_button_click_2_listener","CustomersComponent_Template_button_click_4_listener","CustomersComponent_div_6_Template","CustomersComponent_div_7_Template","ɵɵclassProp","i3","NgIf","styles"],"sources":["C:\\Atul\\SurveyPopupIntegration\\surveyPopupFE\\CMS\\src\\app\\customers\\customers.component.ts","C:\\Atul\\SurveyPopupIntegration\\surveyPopupFE\\CMS\\src\\app\\customers\\customers.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators, ReactiveFormsModule } from '@angular/forms';\r\nimport { CommonModule } from '@angular/common';\r\nimport { EnquiryFormService, CustomerEnquiry } from '../enquiry-form/enquiry-form.service';\r\nimport { EnquiryFormComponent } from \"../enquiry-form/enquiry-form.component\";\r\nimport { AppModule } from \"../app.module\";\r\nimport { CustomerDetailsComponent } from \"../customer-details/customer-details.component\";\r\n\r\n@Component({\r\n // imports: [CommonModule, ReactiveFormsModule, EnquiryFormComponent, AppModule]\r\n  imports: [CommonModule, ReactiveFormsModule, EnquiryFormComponent, CustomerDetailsComponent],\r\n  templateUrl: './customers.component.html',\r\n  styleUrl: './customers.component.scss'\r\n})\r\nexport class CustomersComponent implements OnInit{\r\n  mode: 'add' | 'search' = 'add';\r\n\r\n  // Add New Customer (Enquiry) Form\r\n  enquiryForm!: FormGroup;\r\n  submitted = false;\r\n  isLoading = false;\r\n  addSuccessMsg = '';\r\n  addErrorMsg = '';\r\n\r\n  // Search Existing Customer\r\n  searchForm: FormGroup;\r\n  searchSubmitted = false;\r\n  searchLoading = false;\r\n  searchErrorMsg = '';\r\n  foundCustomer: CustomerEnquiry | null = null;\r\n\r\n  // For search/edit\r\n  customerForm: FormGroup;\r\n  newRemark = this.fb.control('', [Validators.required, Validators.minLength(5)]);\r\n  newAttendedBy = this.fb.control('', [Validators.required, Validators.minLength(2)]);\r\n  isUpdating = false;\r\n\r\n  // Options (reuse from enquiry form)\r\n  incomeSources = [\r\n    { value: 'salary', label: 'Salary' },\r\n    { value: 'business', label: 'Business' },\r\n    { value: 'freelance', label: 'Freelance' },\r\n    { value: 'pension', label: 'Pension' },\r\n    { value: 'investment', label: 'Investment' },\r\n    { value: 'other', label: 'Other' }\r\n  ];\r\n  referenceOptions = [\r\n    { value: 'social_media', label: 'Social Media' },\r\n    { value: 'friend', label: 'Friend' },\r\n    { value: 'advertisement', label: 'Advertisement' },\r\n    { value: 'website', label: 'Website' },\r\n    { value: 'agent', label: 'Agent' },\r\n    { value: 'other', label: 'Other' }\r\n  ];\r\n  propertyInterests = [\r\n    { value: 'studio-apt', label: 'Studio Apt' },\r\n    { value: '1-bhk', label: '1 BHK' },\r\n    { value: '2-bhk', label: '2 BHK' },\r\n    { value: '3-bhk', label: '3 BHK' },\r\n    { value: 'jodi-flat', label: 'JodiFlat' }\r\n  ];\r\n\r\n  constructor(private fb: FormBuilder, private enquiryService: EnquiryFormService) {\r\n    this.searchForm = this.fb.group({\r\n      mobileNumber: ['', [Validators.required, Validators.pattern('^[0-9]{10}$')]]\r\n    });\r\n    this.customerForm = this.fb.group({\r\n      firstName: ['', [Validators.required, Validators.minLength(2), Validators.maxLength(50)]],\r\n      lastName: ['', [Validators.required, Validators.minLength(2), Validators.maxLength(50)]],\r\n      email: ['', [Validators.required, Validators.email]],\r\n      mobile: ['', [Validators.required, Validators.pattern('^[0-9]{10}$')]],\r\n      address: ['', [Validators.required, Validators.minLength(10), Validators.maxLength(500)]],\r\n      age: ['', [Validators.required, Validators.min(18), Validators.max(100)]],\r\n      incomeSource: ['', Validators.required],\r\n      income: ['', [Validators.required, Validators.min(10000), Validators.max(10000000)]],\r\n      budget: ['', [Validators.required, Validators.min(100000), Validators.max(100000000)]],\r\n      reference: ['', Validators.required],\r\n      referencePerson: [''],\r\n      propertyInterests: this.fb.group({\r\n        'studio-apt': [false],\r\n        '1-bhk': [false],\r\n        '2-bhk': [false],\r\n        '3-bhk': [false],\r\n        'jodi-flat': [false]\r\n      }),\r\n      remarks: [''],\r\n      attendedBy: [''],\r\n      status: [''],\r\n      submittedAt: ['']\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.initEnquiryForm();\r\n    this.setupReferenceValidation();\r\n  }\r\n\r\n  // --- Enquiry Form Logic ---\r\n  initEnquiryForm(): void {\r\n    this.enquiryForm = this.fb.group({\r\n      firstName: ['', [Validators.required, Validators.minLength(2), Validators.maxLength(50)]],\r\n      lastName: ['', [Validators.required, Validators.minLength(2), Validators.maxLength(50)]],\r\n      email: ['', [Validators.required, Validators.email]],\r\n      mobile: ['', [Validators.required, Validators.pattern('^[0-9]{10}$')]],\r\n      address: ['', [Validators.required, Validators.minLength(10), Validators.maxLength(500)]],\r\n      age: ['', [Validators.required, Validators.min(18), Validators.max(100)]],\r\n      incomeSource: ['', Validators.required],\r\n      monthlyIncome: ['', [Validators.required, Validators.min(10000), Validators.max(10000000)]],\r\n      budget: ['', [Validators.required, Validators.min(100000), Validators.max(100000000)]],\r\n      reference: ['', Validators.required],\r\n      referencePerson: [''],\r\n      remarks: ['', [Validators.required, Validators.minLength(10), Validators.maxLength(1000)]],\r\n      attendedBy: ['', [Validators.required, Validators.minLength(2), Validators.maxLength(100)]],\r\n      propertyInterests: this.fb.group({\r\n        'studio-apt': [false],\r\n        '1-bhk': [false],\r\n        '2-bhk': [false],\r\n        '3-bhk': [false],\r\n        'jodi-flat': [false]\r\n      }, { validators: this.atLeastOneSelected })\r\n    });\r\n  }\r\n\r\n  setupReferenceValidation(): void {\r\n    this.enquiryForm.get('reference')?.valueChanges.subscribe(value => {\r\n      const referencePersonControl = this.enquiryForm.get('referencePerson');\r\n      if (value === 'friend' || value === 'agent') {\r\n        referencePersonControl?.setValidators([Validators.required, Validators.minLength(2), Validators.maxLength(100)]);\r\n      } else {\r\n        referencePersonControl?.clearValidators();\r\n        referencePersonControl?.setValue('');\r\n      }\r\n      referencePersonControl?.updateValueAndValidity();\r\n    });\r\n  }\r\n\r\n  atLeastOneSelected(group: FormGroup): {[key: string]: any} | null {\r\n    const selected = Object.values(group.value).some(value => value === true);\r\n    return selected ? null : { atLeastOneRequired: true };\r\n  }\r\n\r\n  get f() { return this.enquiryForm.controls; }\r\n  get propertyInterestsGroup() { return this.enquiryForm.get('propertyInterests') as FormGroup; }\r\n  get searchF() { return this.searchForm.controls; }\r\n\r\n  shouldShowReferencePerson(): boolean {\r\n    const referenceValue = this.enquiryForm.get('reference')?.value;\r\n    return referenceValue === 'friend' || referenceValue === 'agent';\r\n  }\r\n\r\n  onInterestChange(event: any, interest: string): void {\r\n    const checked = event.target.checked;\r\n    this.propertyInterestsGroup.patchValue({ [interest]: checked });\r\n    this.propertyInterestsGroup.updateValueAndValidity();\r\n  }\r\n\r\n  // --- Add New Customer ---\r\n  onAddSubmit(): void {\r\n    this.submitted = true;\r\n    this.addErrorMsg = '';\r\n    this.addSuccessMsg = '';\r\n    if (this.enquiryForm.valid) {\r\n      this.isLoading = true;\r\n      const customerData = this.mapFormDataToApiPayload();\r\n      this.enquiryService.submitCustomerEnquiry(customerData).subscribe({\r\n        next: () => {\r\n          this.isLoading = false;\r\n          this.addSuccessMsg = 'Customer enquiry submitted successfully!';\r\n          this.enquiryForm.reset();\r\n          this.submitted = false;\r\n        },\r\n        error: (error) => {\r\n          this.isLoading = false;\r\n          this.addErrorMsg = error.error?.message || 'Submission failed. Please try again.';\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  // --- Search Existing Customer ---\r\n  onSearchSubmit(): void {\r\n    this.searchSubmitted = true;\r\n    this.searchErrorMsg = '';\r\n    this.foundCustomer = null;\r\n    if (this.searchForm.valid) {\r\n      this.searchLoading = true;\r\n      const mobile = this.searchForm.value.mobileNumber;\r\n      this.enquiryService.getCustomerByMobile(mobile).subscribe({\r\n        next: (res: any) => {\r\n          this.searchLoading = false;\r\n          this.foundCustomer = res?.data || null;\r\n          if (!this.foundCustomer) {\r\n            this.searchErrorMsg = 'No customer found with this mobile number.';\r\n          } else {\r\n            this.populateCustomerForm(this.foundCustomer);\r\n          }\r\n        },\r\n        error: (error) => {\r\n          this.searchLoading = false;\r\n          this.searchErrorMsg = error.error?.message || 'Search failed. Please try again.';\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  populateCustomerForm(customer: CustomerEnquiry): void {\r\n    this.customerForm.patchValue({\r\n      firstName: customer.firstName,\r\n      lastName: customer.lastName,\r\n      email: customer.email,\r\n      mobile: customer.mobile,\r\n      address: customer.address,\r\n      age: customer.age,\r\n      incomeSource: customer.incomeSource,\r\n      income: customer.income,\r\n      budget: customer.budget,\r\n      reference: customer.reference,\r\n      referencePerson: customer.referencePerson || '',\r\n      status: customer.status || '',\r\n      submittedAt: customer.submittedAt || ''\r\n    });\r\n    // Set property interests\r\n    if (customer.propertyInterests) {\r\n      const propertyInterestsGroup = this.customerForm.get('propertyInterests') as FormGroup;\r\n      Object.keys(customer.propertyInterests).forEach(key => {\r\n        if (propertyInterestsGroup.get(key)) {\r\n          propertyInterestsGroup.get(key)?.setValue(customer.propertyInterests[key]);\r\n        }\r\n      });\r\n    }\r\n    // Set remarks and attendedBy from the first remark entry\r\n    if (customer.remarks && customer.remarks.length > 0) {\r\n      const firstRemark = customer.remarks[0];\r\n      this.customerForm.patchValue({\r\n        remarks: firstRemark.remark,\r\n        attendedBy: firstRemark.attendedBy\r\n      });\r\n    }\r\n    this.customerForm.get('remarks')?.enable();\r\n    this.customerForm.get('attendedBy')?.enable();\r\n  }\r\n\r\n  updateCustomer(): void {\r\n    if (this.newRemark.invalid || this.newAttendedBy.invalid) return;\r\n    if (!this.foundCustomer?.id) {\r\n      this.searchErrorMsg = 'Customer ID is missing.';\r\n      return;\r\n    }\r\n    this.isUpdating = true;\r\n    const updatedRemarks = [\r\n      ...((this.foundCustomer?.remarks as any[]) || []),\r\n      {\r\n        remark: this.newRemark.value,\r\n        attendedBy: this.newAttendedBy.value,\r\n        visitDate: new Date().toISOString()\r\n      }\r\n    ];\r\n    const formValue = this.customerForm.getRawValue();\r\n    let referencePersonValue = null;\r\n    if (formValue.reference === 'friend' || formValue.reference === 'agent') {\r\n      referencePersonValue = formValue.referencePerson;\r\n    }\r\n    const payload: any = {\r\n      id: this.foundCustomer.id,\r\n      firstName: formValue.firstName,\r\n      lastName: formValue.lastName,\r\n      email: formValue.email,\r\n      address: formValue.address,\r\n      age: formValue.age,\r\n      incomeSource: formValue.incomeSource,\r\n      income: formValue.income,\r\n      budget: formValue.budget,\r\n      reference: formValue.reference,\r\n      referencePerson: referencePersonValue,\r\n      propertyInterests: formValue.propertyInterests,\r\n      status: formValue.status,\r\n      submittedAt: formValue.submittedAt,\r\n      remarks: updatedRemarks\r\n    };\r\n    this.enquiryService.updateCustomer(this.foundCustomer.id, payload).subscribe({\r\n      next: (res: any) => {\r\n        this.isUpdating = false;\r\n        this.newRemark.reset();\r\n        this.newAttendedBy.reset();\r\n        this.onSearchSubmit(); // Refresh details\r\n      },\r\n      error: (err: any) => {\r\n        this.isUpdating = false;\r\n        this.searchErrorMsg = err?.error?.message || 'Update failed';\r\n      }\r\n    });\r\n  }\r\n\r\n  // --- Utility ---\r\n  private mapFormDataToApiPayload(): CustomerEnquiry {\r\n    const formValue = this.enquiryForm.value;\r\n    const propertyInterestsMap: { [key: string]: boolean } = {};\r\n    if (formValue.propertyInterests) {\r\n      Object.keys(formValue.propertyInterests).forEach(key => {\r\n        propertyInterestsMap[key] = Boolean(formValue.propertyInterests[key]);\r\n      });\r\n    } else {\r\n      this.propertyInterests.forEach(interest => {\r\n        propertyInterestsMap[interest.value] = false;\r\n      });\r\n    }\r\n    const remarksArray = [{\r\n      remark: formValue.remarks,\r\n      attendedBy: formValue.attendedBy,\r\n      visitDate: new Date().toISOString()\r\n    }];\r\n    return {\r\n      firstName: formValue.firstName,\r\n      lastName: formValue.lastName,\r\n      email: formValue.email,\r\n      mobile: formValue.mobile,\r\n      address: formValue.address,\r\n      age: formValue.age,\r\n      incomeSource: formValue.incomeSource,\r\n      income: formValue.monthlyIncome,\r\n      budget: formValue.budget,\r\n      reference: formValue.reference,\r\n      referencePerson: formValue.referencePerson || undefined,\r\n      propertyInterests: propertyInterestsMap,\r\n      remarks: remarksArray\r\n    };\r\n  }\r\n}\r\n","<div class=\"customer-details-container\">\r\n    <div class=\"mode-toggle\">\r\n      <button [class.active]=\"mode === 'add'\" (click)=\"mode = 'add'\">Add New Customer</button>\r\n      <button [class.active]=\"mode === 'search'\" (click)=\"mode = 'search'\">Search Existing Customer</button>\r\n    </div>\r\n  \r\n    <!-- Add New Customer Form -->\r\n    <!-- <form *ngIf=\"mode === 'add'\" [formGroup]=\"enquiryForm\" (ngSubmit)=\"onAddSubmit()\" class=\"enquiry-form\">\r\n      <h2>Add New Customer</h2>\r\n      <div class=\"form-row\">\r\n        <label>First Name</label>\r\n        <input formControlName=\"firstName\" type=\"text\" [class.error]=\"submitted && f['firstName'].errors\" />\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <label>Last Name</label>\r\n        <input formControlName=\"lastName\" type=\"text\" [class.error]=\"submitted && f['lastName'].errors\" />\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <label>Email</label>\r\n        <input formControlName=\"email\" type=\"email\" [class.error]=\"submitted && f['email'].errors\" />\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <label>Mobile</label>\r\n        <input formControlName=\"mobile\" type=\"tel\" maxlength=\"10\" [class.error]=\"submitted && f['mobile'].errors\" />\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <label>Address</label>\r\n        <input formControlName=\"address\" type=\"text\" [class.error]=\"submitted && f['address'].errors\" />\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <label>Age</label>\r\n        <input formControlName=\"age\" type=\"number\" [class.error]=\"submitted && f['age'].errors\" />\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <label>Income Source</label>\r\n        <select formControlName=\"incomeSource\" [class.error]=\"submitted && f['incomeSource'].errors\">\r\n          <option value=\"\">Select</option>\r\n          <option *ngFor=\"let src of incomeSources\" [value]=\"src.value\">{{ src.label }}</option>\r\n        </select>\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <label>Monthly Income</label>\r\n        <input formControlName=\"monthlyIncome\" type=\"number\" [class.error]=\"submitted && f['monthlyIncome'].errors\" />\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <label>Budget</label>\r\n        <input formControlName=\"budget\" type=\"number\" [class.error]=\"submitted && f['budget'].errors\" />\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <label>Reference</label>\r\n        <select formControlName=\"reference\" [class.error]=\"submitted && f['reference'].errors\">\r\n          <option value=\"\">Select</option>\r\n          <option *ngFor=\"let ref of referenceOptions\" [value]=\"ref.value\">{{ ref.label }}</option>\r\n        </select>\r\n      </div>\r\n      <div class=\"form-row\" *ngIf=\"shouldShowReferencePerson()\">\r\n        <label>Reference Person</label>\r\n        <input formControlName=\"referencePerson\" type=\"text\" [class.error]=\"submitted && f['referencePerson'].errors\" />\r\n      </div>\r\n      <div class=\"form-row property-interests\">\r\n        <label>Property Interests</label>\r\n        <div class=\"checkbox-group\">\r\n          <label *ngFor=\"let interest of propertyInterests\">\r\n            <input type=\"checkbox\" [formControlName]=\"interest.value\" (change)=\"onInterestChange($event, interest.value)\" />\r\n            {{ interest.label }}\r\n          </label>\r\n        </div>\r\n        <div class=\"error-message\" *ngIf=\"submitted && propertyInterestsGroup.errors?.['atLeastOneRequired']\">\r\n          Please select at least one property interest.\r\n        </div>\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <label>Remarks</label>\r\n        <input formControlName=\"remarks\" type=\"text\" [class.error]=\"submitted && f['remarks'].errors\" />\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <label>Attended By</label>\r\n        <input formControlName=\"attendedBy\" type=\"text\" [class.error]=\"submitted && f['attendedBy'].errors\" />\r\n      </div>\r\n      <div class=\"form-row\">\r\n        <button type=\"submit\" class=\"btn btn-danger fw-bold\" [disabled]=\"isLoading\">{{ isLoading ? 'Submitting...' : 'Submit' }}</button>\r\n      </div>\r\n      <div class=\"success-message\" *ngIf=\"addSuccessMsg\">{{ addSuccessMsg }}</div>\r\n      <div class=\"error-message\" *ngIf=\"addErrorMsg\">{{ addErrorMsg }}</div>\r\n    </form> -->\r\n  <div *ngIf=\"mode === 'add'\" >\r\n    <app-enquiry-form></app-enquiry-form>\r\n  </div>\r\n    <!-- Search Existing Customer -->\r\n    <div *ngIf=\"mode === 'search'\" class=\"search-section\">\r\n      <!-- <form [formGroup]=\"searchForm\" (ngSubmit)=\"onSearchSubmit()\" class=\"search-form\">\r\n        <label>Mobile Number</label>\r\n        <input formControlName=\"mobileNumber\" type=\"tel\" maxlength=\"10\" [class.error]=\"searchSubmitted && searchF['mobileNumber'].errors\" />\r\n        <button type=\"submit\" class=\"btn btn-danger fw-bold\" [disabled]=\"searchLoading\">{{ searchLoading ? 'Searching...' : 'Search' }}</button>\r\n      </form> -->\r\n      <app-customer-details></app-customer-details>\r\n      <div class=\"error-message\" *ngIf=\"searchErrorMsg\">{{ searchErrorMsg }}</div>\r\n      <div *ngIf=\"foundCustomer\" class=\"customer-details\">\r\n        <!-- <form [formGroup]=\"customerForm\" class=\"customer-form\">\r\n          <h3>Customer Details</h3>\r\n          <div class=\"form-row\">\r\n            <label>First Name</label>\r\n            <input formControlName=\"firstName\" type=\"text\" />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Last Name</label>\r\n            <input formControlName=\"lastName\" type=\"text\" />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Email</label>\r\n            <input formControlName=\"email\" type=\"email\" />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Mobile</label>\r\n            <input formControlName=\"mobile\" type=\"tel\" />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Address</label>\r\n            <input formControlName=\"address\" type=\"text\" />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Age</label>\r\n            <input formControlName=\"age\" type=\"number\" />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Income Source</label>\r\n            <input formControlName=\"incomeSource\" type=\"text\" />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Monthly Income</label>\r\n            <input formControlName=\"income\" type=\"number\" />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Budget</label>\r\n            <input formControlName=\"budget\" type=\"number\" />\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Reference</label>\r\n            <input formControlName=\"reference\" type=\"text\" />\r\n          </div>\r\n          <div class=\"form-row\" *ngIf=\"customerForm.get('reference')?.value === 'friend' || customerForm.get('reference')?.value === 'agent'\">\r\n            <label>Reference Person</label>\r\n            <input formControlName=\"referencePerson\" type=\"text\" />\r\n          </div>\r\n          <div class=\"form-row property-interests\">\r\n            <label>Property Interests</label>\r\n            <div class=\"checkbox-group\" formGroupName=\"propertyInterests\">\r\n              <label *ngFor=\"let interest of propertyInterests\">\r\n                <input type=\"checkbox\" [formControlName]=\"interest.value\" />\r\n                {{ interest.label }}\r\n              </label>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Attended By</label>\r\n            <input [formControl]=\"newAttendedBy\" type=\"text\" placeholder=\"Enter name\" />\r\n            <div *ngIf=\"newAttendedBy.touched && newAttendedBy.invalid\" class=\"error-message\">\r\n              <span *ngIf=\"newAttendedBy.errors?.['required']\">Attended By is required</span>\r\n              <span *ngIf=\"newAttendedBy.errors?.['minlength']\">Minimum 2 characters</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <label>Remarks</label>\r\n            <textarea [formControl]=\"newRemark\" placeholder=\"Enter new remark\" rows=\"3\"></textarea>\r\n            <div *ngIf=\"newRemark.touched && newRemark.invalid\" class=\"error-message\">\r\n              <span *ngIf=\"newRemark.errors?.['required']\">Remark is required</span>\r\n              <span *ngIf=\"newRemark.errors?.['minlength']\">Minimum 5 characters</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <button type=\"button\" class=\"btn btn-danger fw-bold\" (click)=\"updateCustomer()\" [disabled]=\"newRemark.invalid || newAttendedBy.invalid || isUpdating\">\r\n              {{ isUpdating ? 'Updating...' : 'Update' }}\r\n            </button>\r\n          </div>\r\n          <div class=\"form-row\" *ngIf=\"foundCustomer.remarks?.length\">\r\n            <label>Remarks History</label>\r\n            <ul>\r\n              <li *ngFor=\"let remark of foundCustomer.remarks\">\r\n                {{ remark.remark }} (by {{ remark.attendedBy }} on {{ remark.visitDate | date:'short' }})\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </form> -->\r\n        \r\n      </div>\r\n    </div>\r\n  </div>\r\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}